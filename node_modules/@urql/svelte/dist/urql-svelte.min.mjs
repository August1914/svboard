import{Client as t,createRequest as e,stringifyVariables as n}from"@urql/core";export*from"@urql/core";import{writable as r}from"svelte/store";import{getContext as o,setContext as i,onDestroy as u}from"svelte";import{subscribe as c,scan as a,switchMap as f,fromValue as s,concat as l,map as v,make as b}from"wonka";function x(){return(x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}new Set;var d=Object.create(null);function p(t,e,n){var o={query:t,variables:e||null,context:n},i={stale:!1,fetching:!0,data:void 0,error:void 0,extensions:void 0},u=r(i),c=!1;return i.set=function(t){for(var e in t&&t!==i||(t=d),c=!0,t)"query"===e||"variables"===e||"context"===e?o[e]=t[e]:"fetching"===e?i[e]=!!t[e]:e in i&&(i[e]=t[e]);i.stale=!!t.stale,c=!1,u.set(i)},i.update=function(t){i.set(t(i))},i.subscribe=function(t,e){return u.subscribe(t,e)},Object.keys(o).forEach((function(t){Object.defineProperty(i,t,{configurable:!1,get:function(){return o[t]},set:function(e){o[t]=e,c||u.set(i)}})})),i}function h(){return o("$$_urql")}function g(t){i("$$_urql",t)}function y(e){var n=new t(e);return g(n),n}var m={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0};function q(t){return b((function(r){var o,i;return t.subscribe((function(t){var u=e(t.query,t.variables),c=n(u.context=t.context);void 0!==o&&u.key===o.key&&void 0!==i&&c===i||(i=c,o=u,r.next(u))}))}))}function O(t){var e=h(),n=c((function(e){t.set(e)}))(a((function(t,e){return x({},t,e)}),m)(f((function(t){return t.context&&t.context.pause?s({fetching:!1,stale:!1}):l([s({fetching:!0,stale:!1}),v((function(t){return x({},{fetching:!1},t,{stale:!!t.stale})}))(e.executeQuery(t,t.context)),s({fetching:!1,stale:!1})])}))(q(t))));return u(n.unsubscribe),t}function j(t,e){var n=h(),r=c((function(e){t.set(e)}))(a((function(t,n){return x({},t,n,{data:void 0!==n.data?"function"==typeof e?e(t.data,n.data):n.data:t.data,stale:!1})}),m)(f((function(e){return e.context&&e.context.pause?s({fetching:!1}):l([s({fetching:!0}),n.executeSubscription(e,t.context),s({fetching:!1})])}))(q(t))));return u(r.unsubscribe),t}function k(t){var e=h(),n="function"!=typeof t.subscribe?p(t.query,t.variables):t;return function(t,r){return n.set({fetching:!0,variables:t||n.variables,context:r||n.context}),e.mutation(n.query,n.variables,n.context).toPromise().then((function(t){var e=x({},{fetching:!1},t);return n.set(e),n}))}}export{h as getClient,y as initClient,k as mutation,p as operationStore,O as query,g as setClient,j as subscription};
//# sourceMappingURL=urql-svelte.min.mjs.map
