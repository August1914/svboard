var e=require("@urql/core"),t=require("wonka");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}exports.requestPolicyExchange=function(n){return function(o){var a=o.forward,c=new Map,i=(n||{}).ttl||3e5;function u(t){return"query"!==t.kind||"cache-first"!==t.context.requestPolicy&&"cache-only"!==t.context.requestPolicy?t:(new Date).getTime()-(c.get(t.key)||0)>i&&(!n.shouldUpgrade||n.shouldUpgrade(t))?e.makeOperation(t.kind,t,r({},t.context,{requestPolicy:"cache-and-network"})):t}function s(e){var t=e.operation.context.meta;(!c.has(e.operation.key)||!t||"miss"===t.cacheOutcome)&&c.set(e.operation.key,(new Date).getTime())}return function(e){return t.tap(s)(a(t.map(u)(e)))}}};
//# sourceMappingURL=urql-exchange-request-policy.min.js.map
